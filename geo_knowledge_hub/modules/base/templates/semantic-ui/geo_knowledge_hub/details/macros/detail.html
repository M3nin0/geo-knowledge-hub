{#
  Copyright (C) 2020 CERN.

  Invenio RDM Records is free software; you can redistribute it and/or modify
  it under the terms of the MIT License; see LICENSE file for more details.
#}

{% macro _identifiers_for_group(related_identifiers) %}
  {% for identifier in related_identifiers %}
    <dd>
      {% if identifier.resource_type is defined %}
        {{ identifier.resource_type.title_l10n }}:
      {% endif %}

      {% set url = identifier.identifier|pid_url %}
      {% if url %}
        <a href="{{ url }}" target="_blank" title="{{ _('Opens in new tab') }}">
          {{ identifier.identifier }}
        </a>
      {% else %}
        {{ identifier.identifier }}
      {% endif %}

      {{ ' (' + identifier.scheme | get_scheme_label + ')' }}
    </dd>
  {% endfor %}
{% endmacro %}

{% macro show_related_identifiers(related_identifiers) %}
  <div id="details-list-div" data-relatedIdentifiers='{{ related_identifiers | tojson }}'></div>
{% endmacro %}

{% macro show_knowledge_packages(related_knowledge_packages, is_preview) %}
  <table class="ui very padded basic table">
    <tbody>
    {% for item in related_knowledge_packages %}
      <tr>
        <td>
          <i class="large box icon"></i>
        </td>

        {% if is_preview and "record_html" in item.links %}
          {%- set package_page = item.links.record_html + "?preview=1" -%}
        {% else %}
          {%- set package_page = item.links.self_html -%}
        {% endif %}

        <td><a href="{{ package_page }}"> {{ item.metadata.title }}</a></td>
      </tr>
    {% endfor %}
    </tbody>
  </table>
{% endmacro %}
